<div class="loanForm">
    <div class="loans">
        <h2>Lista de Empréstimos</h2>
        <div *ngFor="let loan of loans; let i; index">
            <b class="loanListItem" (click)="selectLoan(loan)">• {{ loan.user!.name }}</b>
        </div>
    </div>
    <div>
        <form [formGroup]="loanForm" #formDir="ngForm">
            <div class="actions">
                <button class="btn btn-primary" (click)="new()">Novo</button>
                <button class="btn btn-primary" (click)="delete()">Excluir</button>
            </div>
            <div class="form-group">
                <label for="user">Usuário:</label>
                <select title="user" formControlName="user" [(ngModel)]="displayedLoan.user">
                    <option id="{{user.name}}" [ngValue]="user" *ngFor="let user of users; let i; index"
                        [selected]="isUsuarioSelected(user)">{{ user.name }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="employee">Funcionário:</label>
                <select name="employee" formControlName="employee" [(ngModel)]="displayedLoan.employee">
                    <option [ngValue]="employee" *ngFor="let employee of employee; let i; index"
                        [selected]="isFuncionarioSelected(employee)">{{ employee.name }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="book">Livro:</label>
                <select name="book" formControlName="book" [(ngModel)]="displayedLoan.book">
                    <option [ngValue]="book" *ngFor="let book of books; let i; index"
                        [selected]="isLivroSelected(book)">{{ book.name }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="loanDate">Data Inicial:</label>
                <input type="text" placeholder="Data de empréstimo: cadastrada automaticamente" readonly="true" formControlName="loanDate"
                    [(ngModel)]="displayedLoan.loanDate">
            </div>
            <div class="form-group">
                <label for="devolutionDate">Data Final:</label>
                <input type="text" placeholder="Data de devolução: cadastrada automaticamente" readonly="true" formControlName="devolutionDate"
                    [(ngModel)]="displayedLoan.devolutionDate">
            </div>
            <div class="form-group">
                <label for="isOpen">Situação:</label>
                <input type="text" readonly="true" placeholder="Situação" formControlName="isOpen" [(ngModel)]="situacao">
            </div>
            <input type="submit" (click)="saveOrUpdate()" value="{{btnText}}">
        </form>
    </div>
</div>